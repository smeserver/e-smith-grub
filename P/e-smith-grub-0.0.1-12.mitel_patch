Index: e-smith-grub/e-smith-grub.spec
diff -u e-smith-grub/root/etc/e-smith/templates/boot/grub/grub.conf/UpdateDefault:1.1 e-smith-grub/root/etc/e-smith/templates/boot/grub/grub.conf/UpdateDefault:1.2
--- e-smith-grub/root/etc/e-smith/templates/boot/grub/grub.conf/UpdateDefault:1.1	Fri Jun 24 12:27:08 2005
+++ e-smith-grub/root/etc/e-smith/templates/boot/grub/grub.conf/UpdateDefault	Mon Sep 19 14:56:48 2005
@@ -6,7 +6,10 @@
     close VERSION;
 
     $default_index = 0;
-
+    foreach (@lines)
+    {
+	$default_index=$1 if /^default=(\d+)/;
+    }
 
     my $i = 0;
     foreach $kernel (grep { /^[^#]*kernel\s+.*vmlinuz/ } @lines)
